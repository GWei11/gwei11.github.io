---
title: 多线程常见面试题
categories:
	- [java, 多线程]
tags:
	- java
	- 多线程
---

# 创建线程的方式有几种？

如果是从本质上来看是两种

* 继承`Thread`类
* 实现`Runnable`接口

但是只是从创建方式来看，可能会有多种，比如除了上面所说的，还有

* 通过线程池的方式来创建
* 通过`Callback`的方式来创建

# 通过`Runnable`方式和继承`Thread`方式那种方式更好

使用实现`Runnable`接口方式更好

* `java`中是单继承，但是是多实现的，如果继承了`Thread`类那么就不能继承其余的类
* 从代码架构层面来说，使用`Runnable`形式可以解耦



# 一个线程能两次执行`start`方法么，`why`

一个线程不能执行两次`start`方法，可以先看一下`start`方法的源码

```java
public synchronized void start() {
  // 第一个关注点，调用start方法之前会先判断标识
        if (threadStatus != 0)
            throw new IllegalThreadStateException();
        group.add(this);

        boolean started = false;
        try {
            start0();
          // 第二个关注点，调用之后会修改标识
            started = true;
        } finally {
            try {
                if (!started) {
                    group.threadStartFailed(this);
                }
            } catch (Throwable ignore) {
            }
        }
    }
```

从上面的代码中可以看出，在`start`方法中有两个地方需要注意

* 调用`start`方法之前会先判断标识
* 调用之后会修改标识

所以调用一次之后，标识已经被修改了，那么再一次调用就会抛出`IllegalThreadStateException`异常，其实这是和线程的六个状态有关。

